{
  "descripcion": "INPUT COMPLETO PARA CREAR UN PEDIDO DE VENTA",
  "endpoint": "POST /api/pedidos",
  "url": "http://localhost:51250/api/pedidos",
  
  "ejemplo_minimo": {
    "fecha": "2025-01-15",
    "cliente": 1453,
    "vendedor": 17,
    "sucid": 1,
    "lineas": [
      {
        "matid": 1,
        "cantidad": 1,
        "bodid": 1
      }
    ]
  },

  "ejemplo_completo": {
    "numero": "00000034",
    "fecha": "2025-01-15",
    "cliente": 1453,
    "vendedor": 17,
    "sucid": 1,
    "cenid": 1,
    "areadid": 1,
    "codcomp": "PV",
    "codprefijo": "FA",
    "observ": "Pedido de prueba con todos los campos",
    "formapago": "CR",
    "plazodias": 30,
    "moneda": "COP",
    "usarPrecioSucursal": true,
    "lineas": [
      {
        "matid": 1,
        "cantidad": 2,
        "bodid": 1,
        "precio": 15000,
        "preciolista": 15000,
        "descuento": 500,
        "porciva": 19,
        "tipund": "D"
      },
      {
        "matid": 3,
        "cantidad": 1,
        "bodid": 1,
        "precio": 25000,
        "descuento": 0,
        "porciva": 19
      }
    ]
  },

  "ejemplo_sin_numero_autogenerado": {
    "fecha": "2025-01-15",
    "cliente": 1453,
    "vendedor": 17,
    "sucid": 1,
    "codcomp": "PV",
    "codprefijo": "FA",
    "observ": "Pedido sin número - se autogenera desde CONSECUTIVO",
    "formapago": "CO",
    "plazodias": 0,
    "moneda": "COP",
    "usarPrecioSucursal": true,
    "lineas": [
      {
        "matid": 1,
        "cantidad": 5,
        "bodid": 1
      },
      {
        "matid": 3,
        "cantidad": 3,
        "bodid": 1
      }
    ]
  },

  "ejemplo_contado": {
    "fecha": "2025-01-15",
    "cliente": 1453,
    "vendedor": 17,
    "sucid": 1,
    "formapago": "CO",
    "plazodias": 0,
    "moneda": "COP",
    "observ": "Pedido de contado",
    "lineas": [
      {
        "matid": 1,
        "cantidad": 1,
        "bodid": 1
      }
    ]
  },

  "ejemplo_credito": {
    "fecha": "2025-01-15",
    "cliente": 1453,
    "vendedor": 17,
    "sucid": 1,
    "formapago": "CR",
    "plazodias": 60,
    "moneda": "COP",
    "observ": "Pedido a crédito 60 días",
    "lineas": [
      {
        "matid": 1,
        "cantidad": 10,
        "bodid": 1,
        "precio": 12000,
        "descuento": 1000,
        "porciva": 19
      }
    ]
  },

  "campos_obligatorios": {
    "fecha": "string (YYYY-MM-DD) - Fecha del pedido",
    "cliente": "number (TERID) - ID del cliente en TERCEROS",
    "vendedor": "number (TERID) - ID del vendedor en TERCEROS",
    "sucid": "number - ID de la sucursal",
    "lineas": "array - Array de objetos con las líneas del pedido",
    "lineas[].matid": "number - ID del material (obligatorio en cada línea)",
    "lineas[].cantidad": "number - Cantidad del material (obligatorio en cada línea)"
  },

  "campos_opcionales_encabezado": {
    "numero": "string (máx 8 caracteres) - Número del pedido. Si no se envía, se autogenera desde CONSECUTIVO",
    "cenid": "number - ID del centro (default: 1)",
    "areadid": "number - ID del área (default: 1)",
    "codcomp": "string (máx 2 chars) - Código de compañía (default: 'PV')",
    "codprefijo": "string (máx 2 chars) - Prefijo del consecutivo (default: 'FA')",
    "observ": "string (máx 500 chars) - Observaciones (default: 'Pedido creado por API')",
    "formapago": "string - Forma de pago: 'CO' (Contado) o 'CR' (Crédito) (default: 'CR')",
    "plazodias": "number - Plazo en días para crédito (default: 25)",
    "moneda": "string - Código de moneda (default: 'COP')",
    "usarPrecioSucursal": "boolean - Si true, usa PRECIO1 de MATERIALSUC para la sucursal (default: false)"
  },

  "campos_opcionales_lineas": {
    "lineas[].bodid": "number - ID de la bodega (default: 1)",
    "lineas[].precio": "number - Precio unitario de venta. Si no se envía o usarPrecioSucursal=true, se toma de MATERIALSUC.PRECIO1",
    "lineas[].preciolista": "number - Precio de lista. Si no se envía, se usa el precio de venta",
    "lineas[].descuento": "number - Descuento por unidad (default: 0)",
    "lineas[].porciva": "number - Porcentaje de IVA. Si no se envía, se obtiene del MATERIAL.TIPOIVAID",
    "lineas[].tipund": "string - Tipo de unidad (default: 'D')"
  },

  "notas_importantes": [
    "El campo 'numero' es opcional. Si no se envía, se autogenera desde la tabla CONSECUTIVO",
    "Si se envía 'numero', debe ser único para la combinación CODCOMP+CODPREFIJO+SUCID",
    "El campo 'precio' en las líneas es opcional. Si no se envía o usarPrecioSucursal=true, se busca en MATERIALSUC.PRECIO1",
    "El campo 'porciva' se obtiene automáticamente del MATERIAL si no se envía",
    "Los totales (VRBASE, VRIVA, TOTAL) se calculan automáticamente después de insertar las líneas",
    "El campo 'periodo' se deriva automáticamente del mes de la fecha",
    "El campo 'fecvence' se calcula como fecha + plazodias si formapago='CR', sino es igual a fecha",
    "El campo 'coddespachaa' se obtiene del NIT del cliente o su TERID si no tiene NIT",
    "El campo 'nomdespacha' se obtiene del nombre del cliente en TERCEROS"
  ],

  "ejemplo_curl_completo": "curl -X POST \"http://localhost:51250/api/pedidos\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"fecha\": \"2025-01-15\",\n    \"cliente\": 1453,\n    \"vendedor\": 17,\n    \"sucid\": 1,\n    \"codcomp\": \"PV\",\n    \"codprefijo\": \"FA\",\n    \"observ\": \"Pedido completo\",\n    \"formapago\": \"CR\",\n    \"plazodias\": 30,\n    \"moneda\": \"COP\",\n    \"usarPrecioSucursal\": true,\n    \"lineas\": [\n      {\n        \"matid\": 1,\n        \"cantidad\": 2,\n        \"bodid\": 1,\n        \"precio\": 15000,\n        \"descuento\": 500,\n        \"porciva\": 19\n      },\n      {\n        \"matid\": 3,\n        \"cantidad\": 1,\n        \"bodid\": 1\n      }\n    ]\n  }'"
}

















